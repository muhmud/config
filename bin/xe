#!/usr/bin/env sh

# $1 = base (from) currency
# $2 = target (lookup, to) currency
# $3 = amount (defaults to 1)
amount=1
if ! [ -z "$3" ]; then
    amount=$3
fi

API_KEY=a4bb38023b09597d38ff

SOURCE=$1
DESTINATION=$2

SOURCE_DESTINATION="${SOURCE}_${DESTINATION}"

if ! [ -z "$1" ] && ! [ -z "$2" ]; then
    value="$(curl -s https://free.currconv.com/api/v7/convert\?q\=${SOURCE_DESTINATION}\&compact\=ultra\&apiKey\=$API_KEY \
      | jq -r ".${SOURCE_DESTINATION}")"
 
    if ! [ -z "$value" ]; then
        echo "$amount $1 = $(printf '%.5f\n' $(echo "$value * $amount" | bc)) $2"
    fi
fi

