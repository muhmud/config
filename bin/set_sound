#!/bin/bash

CURRENT_SINK=`pacmd list-sinks | grep -zoP '[*] index[:] [0-9]+.*\n.*name[:](.*)' | head -n 2 | tail -n 1 | awk -F ': ' '{ print $2; }'`

if [[ $CURRENT_SINK =~ Creative ]]; then
    NEW_SINK=`pacmd list-sinks | grep -zoP 'index[:] ([0-9]+).*\n.*bluez.*' | head -n 1 | awk -F ': ' '{ print $2; }'`
    NEW_SOURCE=`pacmd list-sources | grep -zoP 'index[:] ([0-9]+).*\n.*bluez.*' | head -n 1 | awk -F ': ' '{ print $2; }'`
else
    NEW_SINK=`pacmd list-sinks | grep -zoP 'index[:] ([0-9]+).*\n.*Creative.*' | head -n 1 | awk -F ': ' '{ print $2; }'`
    NEW_SOURCE=`pacmd list-sources | grep -zoP 'index[:] ([0-9]+).*\n.*Creative.*' | head -n 1 | awk -F ': ' '{ print $2; }'`
fi

/usr/bin/pacmd set-default-sink $NEW_SINK
/usr/bin/pacmd set-default-source $NEW_SOURCE

/usr/bin/pacmd list-sink-inputs | grep index | awk -F ': ' '{ print $2; }' | xargs -I % /usr/bin/pacmd move-sink-input % $NEW_SINK
